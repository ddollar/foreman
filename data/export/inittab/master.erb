<%= "# ----- foreman #{app} processes -----" %>
<% index = 0 %>
<% processes.each do |process| %>
<% 1.upto(concurrency[process.name]) do |num| %>
<% id = app.slice(0, 2).upcase + sprintf("%02d", index) %>
<% port = engine.port_for(process, num, options[:port]) %>
<%= "#{id}:4:respawn:/bin/su - #{user} -c 'PORT=#{port} #{process.command} >> #{log_root}/#{process.name}-#{num}.log 2>&1'" %>
<% index += 1 %>
<% end %>
<% end %>
<%= "# ----- end foreman #{app} processes -----" %>
